<!DOCTYPE html>
<html>
<head>
<title>Face + Uniform Demo</title>
<style>
body {
    background:#111;
    color:#eee;
    text-align:center;
    font-family:Arial, sans-serif;
}
#camera {
    width:80%;
    margin-top:20px;
    border-radius:12px;
    border:3px solid #333;
}
#canvas {
    position:absolute;
    left:10%;
    top:150px;
    pointer-events:none;
}
#result {
    margin-top:25px;
    padding:15px;
    font-size:22px;
    background:#222;
    border-radius:10px;
}
</style>
</head>
<body>

<h1>Face + Uniform Demo</h1>

<video id="camera" autoplay playsinline></video>
<canvas id="canvas"></canvas>
<div id="result">Starting demo…</div>

<script>
let video = document.getElementById("camera");
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");

// Start camera
navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => { video.srcObject = stream; })
.catch(err => { document.getElementById("result").innerHTML = "Camera Error"; });

// Capture frame
function captureFrame() {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
}

// Draw demo face box
function drawDemoBox(match) {
    let x = canvas.width/3;
    let y = canvas.height/4;
    let w = canvas.width/3;
    let h = canvas.height/3;

    ctx.strokeStyle = match ? "lime" : "red";
    ctx.lineWidth = 4;
    ctx.strokeRect(x, y, w, h);

    if(match){
        ctx.font = "20px Arial";
        ctx.fillStyle = "lime";
        ctx.fillText("ID: A101", x, y-10);
    }
}

// Demo: simulate face recognition & uniform
function demoCheck() {
    captureFrame();

    // Randomly decide if face matches
    let faceMatch = Math.random() > 0.2; // 80% chance match
    drawDemoBox(faceMatch);

    let faceText = faceMatch ? "✔ Face Match: A101" : "❌ Face Not Recognized";
    let uniformText = faceMatch ? "✔ Uniform OK" : "❌ Uniform Not OK";

    document.getElementById("result").innerHTML = faceText + "<br>" + uniformText;

    // Repeat every 3 seconds
    setTimeout(demoCheck, 3000);
}

// Start demo after 1 second
setTimeout(demoCheck, 1000);
</script>

</body>
</html>
